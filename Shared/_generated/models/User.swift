//
//  User.swift
//  Bartleby
//
// THIS FILE AS BEEN GENERATED BY BARTLEBYFLEXIONS for benoit@pereira-da-silva.com
// DO NOT MODIFY THIS FILE YOUR MODIFICATIONS WOULD BE ERASED ON NEXT GENERATION!
// WE TRY TO GENERATE ANY REPETITIVE CODE AND TO IMPROVE THE QUALITY ITERATIVELY
//
// Copyright (c) 2015  Chaosmos | https://chaosmos.fr  All rights reserved.
//
import Foundation
#if !USE_EMBEDDED_MODULES
import Alamofire
import ObjectMapper
#endif

// MARK: Model User
@objc(User) public class User : BaseObject{


	//The spaceUID. A user with the same credentials can exists within multiple Data space.
	public var spaceUID:String = "\(Bartleby.createUID())"
	//the verification method
	public enum VerificationMethod:String{
		case None = "None"
		case ByPhoneNumber = "ByPhoneNumber"
		case ByEmail = "ByEmail"
	}
	public var verificationMethod:VerificationMethod = .ByPhoneNumber
	public var firstname:String = "\(Bartleby.randomStringWithLength(5))"
	public var lastname:String = "\(Bartleby.randomStringWithLength(5))"
	//The user's email. Can be the secondary Identification source 
	public var email:String?
	//The user's phone number. Can be the secondary Identification source 
	public var phoneNumber:String?
	//The hashed version of the user password
	public var password:String = "\(Bartleby.randomStringWithLength(8,signs:Bartleby.configuration.PASSWORD_CHAR_CART))"
	//An activation code
	public var activationCode:String = "\(Bartleby.randomStringWithLength(8,signs:Bartleby.configuration.PASSWORD_CHAR_CART))"
	//User Status
	public enum Status:String{
		case New = "new"
		case Actived = "actived"
		case Suspended = "suspended"
	}
	public var status:Status = .New
	//The tags of the user
	public var tags:[Alias] = Bartleby.arrayOfAliases()
	//The groups of the user
	public var groups:[Alias] = Bartleby.arrayOfAliases()
	//Notes
	public var notes:String?


    // MARK: Mappable

    required public init?(_ map: Map) {
        super.init(map)
        mapping(map)
    }

    override public func mapping(map: Map) {
        super.mapping(map)
		spaceUID <- map["spaceUID"]
		verificationMethod <- map["verificationMethod"]
		firstname <- map["firstname"]
		lastname <- map["lastname"]
		email <- map["email"]
		phoneNumber <- map["phoneNumber"]
		password <- map["password"]
		activationCode <- map["activationCode"]
		status <- map["status"]
		tags <- map["tags"]
		groups <- map["groups"]
		notes <- map["notes"]
    }


    // MARK: NSSecureCoding

    required public init?(coder decoder: NSCoder) {
        super.init(coder: decoder)
		spaceUID=String(decoder.decodeObjectOfClass(NSString.self, forKey: "spaceUID")! as NSString)
		verificationMethod=User.VerificationMethod(rawValue:String(decoder.decodeObjectOfClass(NSString.self, forKey: "verificationMethod")! as NSString))! 
		firstname=String(decoder.decodeObjectOfClass(NSString.self, forKey: "firstname")! as NSString)
		lastname=String(decoder.decodeObjectOfClass(NSString.self, forKey: "lastname")! as NSString)
		email=String(decoder.decodeObjectOfClass(NSString.self, forKey:"email") as NSString?)
		phoneNumber=String(decoder.decodeObjectOfClass(NSString.self, forKey:"phoneNumber") as NSString?)
		password=String(decoder.decodeObjectOfClass(NSString.self, forKey: "password")! as NSString)
		activationCode=String(decoder.decodeObjectOfClass(NSString.self, forKey: "activationCode")! as NSString)
		status=User.Status(rawValue:String(decoder.decodeObjectOfClass(NSString.self, forKey: "status")! as NSString))! 
		tags=decoder.decodeObjectOfClasses(NSSet(array: [NSArray.classForCoder(),Alias.classForCoder()]), forKey: "tags")! as! [Alias]
		groups=decoder.decodeObjectOfClasses(NSSet(array: [NSArray.classForCoder(),Alias.classForCoder()]), forKey: "groups")! as! [Alias]
		notes=String(decoder.decodeObjectOfClass(NSString.self, forKey:"notes") as NSString?)

    }

    override public func encodeWithCoder(coder: NSCoder) {
        super.encodeWithCoder(coder)
		coder.encodeObject(spaceUID,forKey:"spaceUID")
		coder.encodeObject(verificationMethod.rawValue ,forKey:"verificationMethod")
		coder.encodeObject(firstname,forKey:"firstname")
		coder.encodeObject(lastname,forKey:"lastname")
		if let email = self.email {
			coder.encodeObject(email,forKey:"email")
		}
		if let phoneNumber = self.phoneNumber {
			coder.encodeObject(phoneNumber,forKey:"phoneNumber")
		}
		coder.encodeObject(password,forKey:"password")
		coder.encodeObject(activationCode,forKey:"activationCode")
		coder.encodeObject(status.rawValue ,forKey:"status")
		coder.encodeObject(tags,forKey:"tags")
		coder.encodeObject(groups,forKey:"groups")
		if let notes = self.notes {
			coder.encodeObject(notes,forKey:"notes")
		}
    }


    override public class func supportsSecureCoding() -> Bool{
        return true
    }


    required public init() {
        super.init()
    }

    // MARK: Identifiable

    override public class var collectionName:String{
        return "users"
    }

    override public var d_collectionName:String{
        return User.collectionName
    }


    // MARK: Persistent

    override public func toPersistentRepresentation()->(UID:String,collectionName:String,serializedUTF8String:String,A:Double,B:Double,C:Double,D:Double,E:Double,S:String){
        var r=super.toPersistentRepresentation()
        r.A=NSDate().timeIntervalSince1970
        return r
    }

}

